{
  "packages": [
    "eslint_d@14.3.0",
    "nodejs@24.10.0",
    "fixjson@latest"
  ],
  "env": {
    "DEVBOX_COREPACK_ENABLED": "true",
    "TEMPLATE_NAME": "npmtemplate"
  },
  "shell": {
    "init_hook": [
      "if ! diff -q <(fixjson devbox.json) devbox.json >/dev/null 2>&1; then fixjson -w devbox.json; fi",
      "pnpm install",
      "export REPO_URL=$(git config --get remote.origin.url)",
      "export PACKAGE_NAME=$(basename -s .git $REPO_URL | tr '[:upper:]' '[:lower:]')",
      "git remote get-url $TEMPLATE_NAME >/dev/null 2>&1 || git remote add -f $TEMPLATE_NAME https://github.com/FMI-MediaMaster/NpmTemplate.git",
      "if [ \"$PACKAGE_NAME\" != \"$TEMPLATE_NAME\" ]; then grep -q '\"name\": \"<NAME>\"' package.json && sed -i \"s|<NAME>|$PACKAGE_NAME|g\" package.json; grep -q '\"url\": \"<REPO_URL>\"' package.json && sed -i \"s|<REPO_URL>|$REPO_URL|g\" package.json; grep -q 'Description for package' package.json && echo -e \"\\n!! Please remember to change the project description in package.json !!\" >&2; fi"
    ],
    "scripts": {
      "template:pull": "git fetch $TEMPLATE_NAME && git rebase $TEMPLATE_NAME/main",
      "template:autorebase": "git fetch $TEMPLATE_NAME && git rebase $TEMPLATE_NAME/main -s recursive -X ours"
    }
  }
}
